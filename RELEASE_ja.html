<?xml version="1.0" encoding="ISO-2022-JP"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-2022-JP" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<link rev="MADE" href="mailto:nakahiro@sarion.co.jp" />
<link rel="StyleSheet" href="rubyStyle.css" type="text/css" media="screen" />
<title>Release Notes - SOAP4R</title>
</head>
<body>

<div class="header">
<h1>
Release Notes - SOAP4R
</h1>

<p class="status">
Last modified: May 20, 2001<br />
Created: July 15, 2000
</p>
</div>

<hr />

<div class="main">
<h2>0. In this document...</h2>

<p>
このドキュメントは，SOAP4Rのリリースノートです．
本文書が含まれているリリースパッケージについての解説です．
</p>

<p>
本文書が対象としているSOAP4Rのバージョンは，
SOAP4R/1.3.0
です．
</p>

<ol>
<li><a href="#changes">Changes</a></li>
<li><a href="#install">Install</a></li>
<li><a href="#uninstall">Uninstall</a></li>
<li><a href="#whats">What is SOAP4R?</a></li>
<li><a href="#dependencies">Dependencies</a></li>
<li><a href="#restrictions">Restrictions</a></li>
<li><a href="#history">History</a></li>
<li><a href="#author">Author</a></li>
<li><a href="#copyright">Copyright</a></li>
</ol>

<h2 id="changes" name="changes">1. Changes</h2>

<ul>
<li><a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=NQXML">NQXML module</a>
を採用し，marshal/unmarshal共に全面的に書き換えました
（XMLストリームの解析については，XMLParserを利用して高速化することも可能です．
lib/soap/parser.rbの末尾を見てください）．
<ul>
<li>XMLParserのTreeParserのかわりに，
NQXMLのstreamingParserもしくはtokenizerを使ってunmarshallingします．</li>
<li>XMLParserのDOMのかわりに，NQXMLのdocumentおよびwriterを使ってmarshallingします．</li>
</ul></li>
<li><a href="http://www.xmethods.net/ilab/">`SOAPBuilders Interoperability Lab.'</a>
で行なわれている互換性テストのうち，なひ環境でテスト可能なものについては全てテストを実施し，全てにパスしました．</li>
<li>全てのmoduleを，名前空間SOAPに入れました．SOAPCGIStub -&gt; SOAP::CGIStubとなっており，重大な非互換性がありますので注意してください．</li>
<li>floatデータ型をサポートしました．</li>
<li>dateTime型において，SOAP4RではTimezoneをサポートしていないので
（date3.rbではちゃんとサポートされています），
marshalling formatからTimezoneの部分を削りました．
いつかちゃんとサポートしたいです．</li>
</ul>

<h2 id="install" name="install">2. Install</h2>

<p>
パッケージを取得し，展開・伸長してください．
libディレクトリに含まれているファイルが，SOAP4Rのライブラリプログラム本体です．
インストーラは用意されていませんので，lib下の各ファイルを適当なディレクトリにコピーし，includeして使ってください．
</p>

<p>
SOAP4Rのライブラリプログラムが動作するためには，redistディレクトリに含まれている，以下の再配布ライブラリプログラムも必要です．
これらもライブラリ本体と一緒に適当なディレクトリにコピーしておいてください．
</p>

<dl>
<dt class="path">date3.rb</dt>
<dd>by ふなばさん（<a href="http://www.kt.rim.or.jp/~tadf/ruby.html">http://www.kt.rim.or.jp/~tadf/ruby.html</a>）</dd>

<dt class="path">parsedate3.rb</dt>
<dd>by ふなばさん（<a href="http://www.kt.rim.or.jp/~tadf/ruby.html">http://www.kt.rim.or.jp/~tadf/ruby.html</a>）</dd>

<dt class="path">uri.rb</dt>
<dd>by 越水さん（<a href="http://www02.so-net.ne.jp/~greentea/ruby/uri/">http://www02.so-net.ne.jp/~greentea/ruby/uri/</a>）</dd>
</dl>

<p>
パッケージ中の各ファイルの解説です．
</p>

<dl>
<dt class="path">lib/</dt>
<dd>SOAP4Rのライブラリプログラム本体．</dd>

<dt class="path">sample/</dt>
<dd>SOAP4Rを利用するサンプルプログラム．</dd>

<dt class="path">sample/apacheClient.rb</dt>
<dd>SOAP-RPCクライアントのサンプルプログラム．
Apache SOAPの，stockquoteおよびaddressbookデモに接続する．
先にサーバ側のインストール &amp; deployを済ませておくこと．
<pre class="path">
./sampleClient.rb http://localhsot:2020/xml-soap/rpcrouter/rpcrouter.jsp
</pre>
などとして起動する．</dd>

<dt class="path">sample/apacheServer.rb</dt>
<dd>SOAP-RPCサーバのサンプルプログラム．
Apache-SOAPライクな，getQuoteやgetAddressFromNameインタフェイスが定義されています．
インタフェイスだけで，機能はありません．</dd>

<dt class="path">sample/RAA/*</dt>
<dd>SOAP-RPCクライアントのサンプルプログラムその2．
www.ruby-lang.orgにあるRAAサーバに接続するプログラム群です．
<ul>
<li>soap4r.rb, soap4rApp.rb: SOAP4Rを使うRubyスクリプト</li>
<li>xmlrpc4r.rb: xmlrpc4r（RAAにあります）を使うRubyスクリプト</li>
<li>pocketSOAP.js: pocketSOAPを使うJScriptスクリプト</li>
<li>SOAP::Lite.pl: SOAP::Lite for Perlを使うPerlスクリプト</li>
</ul>
このサーバはテスト公開中なので，安定動作を期待しないでください．
</dd>

<dt class="path">test/</dt>
<dd><a href="http://www.xmethods.net/ilab/">`SOAPBuilders Interoperability Lab.'</a>
用のクライアントおよびサーバ</dd>

<dt class="path">redist/</dt>
<dd>各種再配布パッケージから，SOAP4Rで利用するファイル群．
利用させて頂いているみなさん，どうもありがとうございます．
</dd>

<dt class="path">redist/archive/</dt>
<dd>各種再配布パッケージそのもの．
各パッケージの著作権および各種隣接権については，各パッケージに記載されているものに従うこと．</dd>
</dl>

<h2 id="uninstall" name="uninstall">3. Uninstall</h2>

<p>
インストール時に作成されたファイルを全部消してください．
</p>

<h2 id="whats" name="whats">4. What is SOAP4R?</h2>

<p>
SOAP4Rは，
<a href="http://www.w3.org/TR/SOAP/">Simple Object Access Protocol (SOAP) 1.1 (W3C Note)</a>
をRubyから利用するためのライブラリプログラムです．
SOAPについての詳細は，
<a href="http://www.sarion.co.jp/ml/soap/">SOAP-ml-JP Home Page</a>
にあるリンク集，
<a href="http://www.sarion.co.jp/ml/soap/link.html">SOAP-ml-JP Links</a>
を御覧ください．
</p>

<p>
他実装との互換性の情報を募集しています．
「〜につないでみたが上手くいかない」「上手くいった」という情報がありましたら，
お気軽に
<a href="mailto:nakahiro@sarion.co.jp" class="path">nakahiro@sarion.co.jp</a>
まで御連絡ください．可能な限り対応します．
</p>

<h2 id="dependencies" name="dependencies">5. Dependencies</h2>

<p>
SOAP4Rを利用するためには，以下のものが必要です．
</p>

<ul>
<li>SOAP4Rは
<a href="http://www.ruby-lang.org">Ruby</a>
向けのライブラリです．
もちろんRuby本体が必要です．
稼働テストは1.6系で行なっています．
クラス変数を使っているため，1.4系では動きません．</li>

<li>SOAP4RはXML関連の処理を
<li><a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=NQXML">NQXML module</a>
に依存しています．
NQXMLモジュールをインストールしておく必要があります．</li>

<li>SOAP-RPCクライアントサンプルを動かすためには，
<a href="http://xml.apache.org/soap/">Apache SOAP</a>
が必要です．
</li>
</ul>

<h2 id="restrictions" name="restrictions">6. Restrictions</h2>

<p>
SOAP4Rは
<a href="http://www.w3.org/TR/SOAP/">SOAP 1.1 (W3C Note)</a>
仕様をサポートすることを目的としていますが，現時点では以下に示す各種様々な制限があります．
これらは全て，SOAP4Rの実装による制限です．
</p>

<ul>
<li style="margin-top: 2ex;">SOAP Envelopeについて
<ul>
<li>SOAP actor属性に対応していません．</li>
<li>SOAP Fault Codesを真面目に扱ってません．</li>
<li>SOAP EnvelopeにおけるencodingStyleが，SOAP Encodingに固定されています．
SOAP for Javaのように素のXMLを埋めるencoding，などに対応していません．</li>
</ul></li>
<li style="margin-top: 2ex;">SOAP Encodingについて
<ul>
<li>XML Schemaを読んでencode/decodeすることはできません．
SOAP Encoding本体に埋め込まれたxsi:typeのみを利用します．</li>
<li>次元が1以外の配列，Partially Transmitted Arrays（部分配列），Sparse Arrays（粗な配列）に対応していません．</li>
<li>SOAP root属性に対応していません．</li>
<li>多重参照へのmarshalling（unmarshallingは可能です）</li>
</ul></li>
<li style="margin-top: 2ex;">その他
<ul>
<li>トランスポートはHTTPのサーバ（CGI），クライアント側のみです．</li>
<li>HTTP Extension Framework（M-POST）に対応していません．</li>
<li>Content-Typeは'text/xml'です．
charset指定には対応していません．</li>
</ul></li>
</ul>

<h2 id="history" name="history">7. History</h2>

<dl>
<dt>1.3.0 - May 20, 2001</dt>
<dd><ul>
<li><a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=NQXML">NQXML module</a>
を採用し，marshal/unmarshal共に全面的に書き換えました
（XMLストリームの解析については，XMLParserを利用して高速化することも可能です．
lib/soap/parser.rbの末尾を見てください）．
<ul>
<li>XMLParserのTreeParserのかわりに，
NQXMLのstreamingParserもしくはtokenizerを使ってunmarshallingします．</li>
<li>XMLParserのDOMのかわりに，NQXMLのdocumentおよびwriterを使ってmarshallingします．</li>
</ul></li>
<li><a href="http://www.xmethods.net/ilab/">`SOAPBuilders Interoperability Lab.'</a>
で行なわれている互換性テストのうち，なひ環境でテスト可能なものについては全てテストを実施し，全てにパスしました．</li>
<li>全てのmoduleを，名前空間SOAPに入れました．SOAPCGIStub -&gt; SOAP::CGIStubとなっており，重大な非互換性がありますので注意してください．</li>
<li>floatデータ型をサポートしました．</li>
<li>dateTime型において，SOAP4RではTimezoneをサポートしていないので
（date3.rbではちゃんとサポートされています），
marshalling formatからTimezoneの部分を削りました．
いつかちゃんとサポートしたいです．</li>
</ul></dd>

<dt>1.2.0 - March 30, 2001</dt>
<dd><a href="http://www.sarion.co.jp/ml/soap/">SOAP-ml-JP</a>
のみなさんに御協力を頂いて，
<a href="http://xml.apache.org/soap/">Apache-SOAP</a>，
<a href="http://www.pocketsoap.com">pocketSOAP/0.91</a>，
<a href="http://www.geocities.com/paulclinger/soap.html">SOAP::Lite for Perl</a>，
<a href="http://www.develop.com/soap/">SOAP/Perl/0.28</a>
との接続テストを行なった結果を反映させました．
SOAP/Perl/0.28以外とは順調に通信できてます．
<ul>
<li>href/idを使ったXMLをunmarshalできるようになりました
（まだ参照をhref/idにmarshalすることはできません）</li>
<li>base64型をサポートしました．</li>
<li>SOAPTimeInstantをSOAPDateTimeに名称変更しました．
XML Schema PRへの追従です．</li>
<li>SOAPStructは，同じアクセサを持つ複数の値を扱えるようになりました．
SOAPStructとは別クラスにしたほうがよかったかも．</li>
<li>ルータは異なる名前空間に属するメソッド群を扱えるようになりました．</li>
<li>&lt;Envelope&gt;のような，非修飾な要素を許可するためのフラグが付きました．
単純にテキストを連結して送るだけのクライアントへの対応が楽になります．</li>
<li>Apache-SOAPで採用されているMapタイプをサポートしました．
RubyのHashもこの型にbindするようにしました．
（SOAP4R/1.1までは，Hashを独自形式にmarshalしてました．
1.1でmarshalされたXMLは，1.2でもHashにunmarshalすることができますが，
1.2では新形式にmarshalされるため，それを1.1でunmarshalすると，Hashではなく
Structになってしまいます．1.2と1.1の非互換に注意してください）</li>
<li>本来ならStructのサブクラスとしてunmarshalすべき型のうち，
'unknown:SOAPStruct'という名前の型を，内部クラスのSOAPStructとして
unmarshalしてしまっていました．修正しました．</li>
<li>SOAPArrayとSOAPStructに，map!およびmembersメソッドを追加しました．</li>
<li>SOAPBodyにrequest，responseおよびfaultメソッドを追加しました．</li>
<li>知らないヘッダ項目を見ると例外で落ちてしまっていました．無視するようにしました．</li>
</ul></dd>

<dt>1.1.0 - March 23, 2001</dt>
<dd>
結構たくさん変更しました．なひ用途でしかテストできてないので，
安定度は低いと思いますので御注意ください．
特に他SOAP実装とのinteroperabilityが不安です．
「〜につないでみたが上手くいかない」というレポートがありましたら，
是非なひ（<a href="mailto:nakahiro@sarion.co.jp" class="path">nakahiro@sarion.co.jp</a>）まで御連絡ください．可能な限り対応します．
<ul>
<li>RPCサーバとしての機能を追加しました．</li>
<li>RPCクライアント/サーバ機能の実装を，SOAP本体から分離しました．</li>
<li>RPCでRuby専用に使える型として，Date，Hashをサポートしました．
（知らない型については，従来通り単なるStructになります）</li>
<li>TimeInstantとして，Timeではなく，
ふなばさんのdate3.rbのDateを使うようにしました．
また，parsedate2→parsedate3に移行してみました．</li>
<li>RPCサーバとしての機能を追加している最中に，
SOAPArrayおよびSOAPStructのencoding/decodingのバグ（特に名前空間回り）を
たくさん修正しました．</li>
</ul>
</dd>

<dt>1.0.2 - November 11, 2000</dt>
<dd>若干古くなってきたので，細かいリフレッシュを行ないました．
<ul>
<li>ruby 1.6.x対応しました．</li>
<li>対応するuri.rbのバージョンが3.54から4.22になりました．</li>
<li>サンプルがxml-soap/2.0に対応しました．</li>
</ul></dd>

<dt>1.0.1 - July 27, 2000</dt>
<dd>SOAP/1.1の配列に対応しました．
実は対応してなかったんです．．．すいません．
<a href="#restrictions">制約</a>
はまだたくさん残っていますので注意してください．</dd>

<dt>1.0.0 - July 17, 2000</dt>
<dd>これが最初のリリースです．
変更点もなにもありません．
なら書くな．^^;</dd>
</dl>

<h2 id="author" name="author">8. Author</h2>

<dl>
<dt>Name</dt>
<dd>NAKAMURA, Hiroshi (aka NaHi or nakahiro)</dd>

<dt>E-mail</dt>
<dd><a href="mailto:nakahiro@sarion.co.jp" class="path">nakahiro@sarion.co.jp</a></dd>

<dt>URL</dt>
<dd><a href="http://www.jin.gr.jp/~nahi/" class="path">http://www.jin.gr.jp/~nahi/</a></dd>
</dl>

<h2 id="copyright" name="copyright">9. Copyright</h2>

<p>
本プログラムの著作権および各種隣接権について．GPL2です．
詳細は
<a href="COPYING">GNU GENERAL PUBLIC LICENSE Version 2, June 1991</a>
を参照してください．
</p>

<p style="text-align: center;">
SOAP4R<br />
Copyright &copy; 2000, 2001 NAKAMURA, Hiroshi.
</p>

<p>
This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.
</p>

<p>
This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
See the GNU General Public License(the file named `COPYING') for more details.
</p>

<p>
You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
</p>

</div>

<hr />

<div class="footer">
<address>
<a href="http://www.jin.gr.jp/~nahi/Ruby/SOAP4R/">SOAP4R</a>.<br />
Copyright &copy; 2000, 2001
<a href="http://www.jin.gr.jp/~nahi/">NAKAMURA, Hiroshi</a>.
</address>
</div>
</body>
</html>
