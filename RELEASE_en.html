<?xml version="1.0"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<link rev="MADE" href="mailto:nakahiro@sarion.co.jp" />
<link rel="StyleSheet" href="rubyStyle.css" type="text/css" media="screen" />
<title>Release Notes - SOAP4R</title>
</head>
<body>

<div class="header">
<h1>
Release Notes - SOAP4R
</h1>

<p class="status">
Last modified: May 6, 2002<br />
Created: July 17, 2000
</p>
</div>

<hr />

<div class="main">
<h2>0. In this document...</h2>

<p>
This is Release Notes of SOAP4R.
</p>

<p>
Target SOAP4R version: SOAP4R/1.4.4
</p>

<ol>
<li><a href="#changes">Changes</a></li>
<li><a href="#install">Install</a></li>
<li><a href="#uninstall">Uninstall</a></li>
<li><a href="#whats">What is SOAP4R?</a></li>
<li><a href="#dependencies">Dependencies</a></li>
<li><a href="#samples">Samples</a></li>
<li><a href="#restrictions">Restrictions</a></li>
<li><a href="#resources">Resources</a></li>
<li><a href="#history">History</a></li>
<li><a href="#author">Author</a></li>
<li><a href="#copyright">Copyright</a></li>
</ol>

<h2 id="changes" name="changes">1. Changes</h2>

<p>
This is a bug fix release.
Following users should update.
</p>

<ul>
<li>Users who use DateTime datatype.</li>
<li>Developers of SOAP client/server which works under multi-thread condition.</li>
<li>REXML users.</li>
</ul>

<p>
Fixed bugs.
</p>

<ul>
<li>XSDDataTime: Changed variable name usec to sec_frac.  It's not a micro sec so name usec is misleading.</li>
<li>XSDTime: Fixed bugs in usec part.</li>
<li>date.rb in standard library and date2 version 3 conflicts because date2.rb is a successor of date.rb and not designed for dual use.
(ex. using a module which requires date.rb like DBI and another module which requires date2.rb).
Added a workaround for this.</li>
<li>SOAP::Processor was not MT-safe.  Fixed.
Projected feature regards to MT are follows.
At least I hope so.  Tell me if you find these wrong.
<ul>
<li>Driver: safe</li>
<li>Proxy: safe</li>
<li>Server: safe</li>
<li>CGIStub: safe</li>
<li>StandaloneServer: safe</li>
<li>RPCRouter: safe</li>
<li>StreamHandler: safe</li>
<li>Processor: safe</li>
<li>SOAPParser: unsafe</li>
<li>SOAPGenerator: unsafe</li>
<li>EncodingStyleHandler: unsafe</li>
</ul>
</li>
<li>SOAP4R/1.4.3 supports REXML/2.1.3 but it did not detect REXML processor automatically.</li>
</ul>

<h2 id="install" name="install">2. Install</h2>

<p>
At first, see <a href="#dependencies">Dependencies</a> section.
You may need to install some extra packages.
Next, get the archived file of SOAP4R and extract it, then simply try;
</p>
<pre class="path">
$ ruby install.rb
</pre>

<p>
Necessary files will be installed to suitable directory.
</p>

<p>
Files in lib/soap directory are SOAP4R library program itself.
Followings are redistributed files in redist/.
</p>

<dl>
<dt class="path">GServer</dt>
<dd>by John W. Small: <a href="http://fairfax2.laser.net/~jsmall/rubycorner.html">http://fairfax2.laser.net/~jsmall/rubycorner.html</a></dd>

<dt class="path">httpserver.rb</dt>
<dd>by Michael Neumann: httpserver.rb in <a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=XML-RPC">[RAA:XML-RPC]</a></dd>
</dl>

<p>
Files in archive:
</p>

<dl>
<dt class="path">lib/soap/</dt>
<dd>SOAP4R library program.</dd>

<dt class="path">sample/</dt>
<dd>SOAP4R samples.
See <a href="#samples">Samples</a> section.</dd>

<dt class="path">test/</dt>
<dd>Clients/Server for
<a href="http://www.xmethods.net/ilab/">`SOAPBuilders Interoperability Lab.'</a>
Followings are advanced examples to use complex type transmit,
sending base64 encoded string, multi-dimensional array, and so on.
<ul>
<li>test/interopR2/server.cgi is a RPC Server side implementation.</li>
<li>test/interopR2/client*.rb is a RPC Client side implementation.</li>
<li>test/interopR2/base.rb includes common definitions for client/server.</li>
</ul>
</dd>

<dt class="path">redist/</dt>
<dd>Redistributed modules which SOAP4R uses.
I would appriciate to authors of these programs.
</dd>

</dl>

<h2 id="uninstall" name="uninstall">3. Uninstall</h2>

<p>
To uninstall;
</p>

<pre class="path">
$ ruby uninstall.rb
</pre>

<p>
Of cource, modules listed at <a href="#dependencies">Dependencies</a>
which you may install are not uninstalled.
</p>

<h2 id="whats" name="whats">4. What is SOAP4R?</h2>

<p>
'SOAP4R' is an implementation of
<a href="http://www.w3.org/TR/SOAP/">Simple Object Access Protocol (SOAP) 1.1 (W3C Note)</a>.
</p>

<p>
Comments, information such as interoperability between SOAP4R and another implementation are welcomed.
Feel free sending mail to
<a href="mailto:nakahiro@sarion.co.jp" class="path">nakahiro@sarion.co.jp</a>.
</p>

<h2 id="dependencies" name="dependencies">5. Dependencies</h2>

<p>
SOAP4R is written in <a href="http://www.ruby-lang.org">Ruby</a> and
aims to use with Ruby application.
You have to install Ruby itself.
Ruby/1.6 series are required.
It does not works on 1.4 series because it does not have class variable.
</p>

<p>
SOAP4R depends on following Ruby modules in
<a href="http://www.ruby-lang.org/en/raa.html">RAA</a>.
You also have to install these modules to use SOAP4R.
</p>

<dl>
<dt class="path">XML processor</dt>
<dd>SOAP4R requires a XML processor package installed.
For now, one of following XML processor must be installed
(SOAP4R automatically detects it in runtime).
<ul>
<li><a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=NQXML">[RAA:NQXML]</a></li>
<li><a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=XMLParser">[RAA:XMLParser]</a></li>
<li><a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=REXML">[RAA:REXML]</a></li>
</ul></dd>

<dt class="path"><a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=date2">[RAA:date2]</a></dt>
<dd>Date and DateTime implementation by Todayoshi Funaba.
Note: This module is scheduled to be included in standard distribution instead of lib/date.rb.  Ruby/1.7 or later.</dd>

<dt class="path"><a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=Devel%3A%3ALogger">[RAA:Devel::Logger]</a></dt>
<dd>Logging utility by NaHi.</dd>

<dt class="path"><a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=http-access2">[RAA:http-access2]</a></dt>
<dd>Yet another HTTP client implementation by NaHi.</dd>

<dt class="path"><a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=Uconv">[RAA:Uconv]</a> (optional)</dt>
<dd>by Yoshida Masato.
It is requred when you want automatic CES conversion between
SJIS &lt;-&gt; UTF8 and EUC &lt;-&gt; UTF8.
Note: SJIS &lt;-&gt; EUC uses NKF module which is in standard distribution.
I will support Iconv for more conversion set.
</dd>

</dl>

<h2 id="samples" name="samples">6. Samples</h2>

<p>
Samples are in sample/ directory of distribution.
Some samples try to connect to public servers.
Set environment variable HTTP_PROXY if you are in a firewall and you have
http proxy to the internet like;
</p>
<pre class="path">
$ export HTTP_PROXY=http://myproxyserver:8080
  or
$ setenv HTTP_PROXY http://myproxyserver:8080
</pre>

<dl>
<dt class="path">babelfish.rb</dt>
<dd>A client for
<a href="http://www.xmethods.com/ve2/ViewListing.po?serviceid=14">BabelFish</a>
which namespace URI is 'urn:xmethodsBabelFish'.
<pre class="path">
$ ./babelfish.rb "Text to translate" [ translation pattern like 'en_fr' ]
</pre>
</dd>

<dt class="path">whois.rb</dt>
<dd>A client for
<a href="http://www.xmethods.com/ve2/ViewListing.po?serviceid=34">SQLData's WHOIS</a>
which namespace URI is 'http://www.SoapClient.com/xml/SQLDataSoap.xsd'.
<pre class="path">
$ ./whois.rb ruby-lang.org
</pre>
CAUTION: This WhoIs server does not handle non-ascii characters correctly.
Querying domain which entry contains Japanese or so will hang.  Gee.
</dd>

<dt class="path">digraph.rb</dt>
<dd>A sample of SOAP marshalling/unmarshalling.
It creates a digraph that contains multi-ref-ed nodes at first
and marshals this object to get serialized XML instance.
Then reads and unmarshals this XML instance to recover a object
which has the same links among nodes in the digraph.
</dd>

<dt class="path">apacheClient.rb</dt>
<dd>SOAP-RPC client sample which connects with demonstration server;
stockquote and addressbook in Apache-SOAP.
You have to install Apache-SOAP and deploy demostration programs.<br />
To execute;
<pre class="path">
$ ./apacheClient.rb http://localhsot:2020/xml-soap/rpcrouter/rpcrouter.jsp
</pre>
</dd>

<dt class="path">Calc/</dt>
<dd>Calc service contains 2 servers and 2 clients.
calc.rb is hosted by server.rb, calc2.rb is hosted by server2.rb.
client.rb is for server.rb, client2.rb is for server2.rb.
<dl>
<dt>calc.rb</dt>
<dd>Calc server definition using module and module methods.
This module responds 'add', 'sub', 'multi' and 'div'.</dd>
<dt>server.rb</dt>
<dd>It requires calc.rb and serve module methods of this module.
To run this server;
<pre class="path">
$ ./server.rb
</pre>
</dd>
<dt>client.rb</dt>
<dd>It connects to server.rb and hit methods served by calc.rb.
To run the client;
<pre class="path">
$ ./client.rb
</pre>
Is it stacked?  Did you run the server.rb?<br/>
Turn logger and wireDumpDev in its source on to see logs and wire dumps of
SOAP transport.</dd>

<dt>calc2.rb</dt>
<dd>Calc server definition using class and instance methods.
An instance of this class holds its value.  Methods 'set' and 'get' is to
set/get the value.
It also responds to '+', '-', '*', and '/'.
</dd>
<dt>server2.rb</dt>
<dd>It requires calc2.rb and creates an instance of CalcService2
that responds all SOAP requests.
Since '+', '-' and so on of calc2.rb are not valid name as an element
in XML instance,
this sample register the method '+' as 'add', '-' as 'sub', and so on.
</dd>
<dt>client2.rb</dt>
<dd>It connects to server2.rb.
Set a value at first and call methods like 'puts objAtServer + 2'.</dd>
</dl>
</dd>

<dt class="path">Exchange/</dt>
<dd>A sample to retrieve the currency rate from public SOAP service.</dd>
<dl>
<dt>iExchange.rb</dt>
<dd>It includes common definitions for client and server of
Exchange service.
Including only a definition of namespace URI of this service.</dd>
<dt>exchange.rb</dt>
<dd>Definition of servant class ExchangeService which returns the currency rate
after connecting to another site by SOAP to get the real rate.
So that this class is the SOAP server for local client and 
is also a SOAP client for public server.
An instance of this class is hosted by server.rb.
The instance responds to only 'getRate' which receives two country code
such as 'USA' and 'Japan'.</dd>
<dt>server.rb</dt>
<dd>It requires exchange.rb and creates an instance of ExchangeService
that responds all SOAP requests.
To run this server;
<pre class="path">
$ ./server.rb
</pre>
</dd>
<dt>client.rb</dt>
<dd>It connects to server.rb.
Turn logger and wireDumpDev in its source on to see logs and wire dumps of
SOAP transport.
To run the client;
<pre class="path">
$ ./client.rb
</pre>
</dd>
</dl>
</dd>

<dt class="path">SampleStruct/</dt>
<dd>A sample to transmit complex structured object which has recursive
object reference.
<dl>
<dt>iSampleStruct.rb</dt>
<dd>It includes common definitions for client and server of
SampleStruct service.
Definition of SampleStruct class and namespace URI of this service.</dd>
<dt>sampleStruct.rb</dt>
<dd>Definition of servant class SampleStructService.
An instance of this class is hosted by server.rb.
The instance responds to only 'hi' which receives a SampleStruct and wraps
it in the new instance of SampleStruct to return .</dd>
<dt>server.rb</dt>
<dd>It requires sampleStruct.rb and creates an instance of SampleStructService
that responds all SOAP requests.
To run this server;
<pre class="path">
$ ./server.rb
</pre>
</dd>
<dt>client.rb</dt>
<dd>It connects to server.rb.
Turn logger and wireDumpDev in its source on to see logs and wire dumps of
SOAP transport.
To run the client;
<pre class="path">
$ ./client.rb
</pre>
</dd>
</dl>
</dd>

<dt class="path">RAA/</dt>
<dd>SOAP-RPC client samples.
These programs connect to RAA SOAP Interface on www.ruby-lang.org.
<ul>
<li>soap4r.rb: Ruby program using SOAP4R</li>
<li>xmlrpc4r.rb: Ruby program using xmlrpc4r</li>
<li>pocketSOAP.js: JScript program using pocketSOAP</li>
<li>SOAP::Lite.pl: Perl program using SOAP::Lite for Perl</li>
</ul>
Since the server is (still) under testing phase so stable operation is not expected.</dd>

<dt class="path">webrick/</dt>
<dd>SOAP-RPC server samples which runs with WEBrick.
<ul>
<li>httpd.rb: HTTP server which soaplet.rb mounts to.
It is powered by WEBrick so you must install
<a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=WEBrick">[RAA:WEBrick]</a>
to run it.</li>
<li>soaplet.rb: A bricklet to add a SOAP function to WEBrick.
It hosts exchange.rb, sampleStruct.rb below, and it is mounted to httpd.rb
to serve ExchangeService and SampleStructService.</li>
<li>ExchangeService
<dl>
<dt>exchange.rb</dt>
<dd>A server class definition which returns the currency rate
after connecting to another site by SOAP to get the real rate.
An instance of this class is instanciated in httpd.rb and this instance
respond to each HTTP request.</dd>
<dt>exchangeClient.rb</dt>
<dd>A client to connect soaplet.rb via SOAP/HTTP to call exchange.rb.</dd>
<dt>iExchange.rb</dt>
<dd>Common class(type) definitions for server and client.</dd>
</dl>
</li>

<li>SampleStructService
<dl>
<dt>sampleStruct.rb</dt>
<dd>A server class definition which wraps a given struct
and returns it.
An instance of this class is instanciated in httpd.rb and this instance
respond to each HTTP request.</dd>
<dt>sampleStructClient.rb</dt>
<dd>A client to connect soaplet.rb via SOAP/HTTP to call sampleStruct.rb</dd>
<dt>iSampleStruct.rb</dt>
<dd>Common class(type) definitions for server and client.</dd>
</dl></li>
</ul>
Run the server;
<pre class="path">
$ ruby httpd.rb
</pre>
Then, run clients;
<pre class="path">
$ ruby sampleStruct.rb
$ ruby exchangeClient.rb
</pre>
Set 'logger' and 'wireDumpDev' in clients to see log and wiredumps of SOAP.
</dd>

<dt class="path">ICD</dt>
<dd>A client for
<a href="http://www.iwebmethod.net/">Insider's Computer Dictionary Web Service</a>.
This service is implemented with ASP.NET so that it's also a sample of
a client which connects to ASP.NET.
CAUTION: this sample contains non-ascii chars in its source and dumped results.
<dl>
<dt>IICD.rb</dt>
<dd>Class(type) definitions for this server.</dd>
<dt>icd.rb</dt>
<dd>Client implementation.  To run the client;
<pre class="path">
$ ./icd.rb
</pre>
</dd>
</dl>
</dd>

<dt class="path">WSDemo</dt>
<dd>A sample of messaging client.  Server side sample does not exist now...</dd>

<dt class="path">RWiki</dt>
<dd>A sample CGI server which receives a request via SOAP and dispatches it
to RWiki server via dRuby.  Naive SOAP/dRuby bridge implementation.</dd>

</dl>

<h2 id="restrictions" name="restrictions">7. Restrictions</h2>

<p>
The following features of the
<a href="http://www.w3.org/TR/SOAP/">SOAP 1.1 (W3C Note)</a>
spec are <strong>NOT</strong> currently supported:
</p>

<ul>
<li style="margin-top: 2ex;">SOAP Envelope
<ul>
<li>SOAP actor attribute</li>
<li>SOAP mustUnderstand attribute</li>
<li>SOAP Fault Codes</li>
</ul></li>
<li style="margin-top: 2ex;">SOAP Encoding
<ul>
<li>encoding/decoding using XML Schema;
Only xsi:type in SOAP Encoding is checked</li>
</ul></li>
<li style="margin-top: 2ex;">Othres
<ul>
<li>Transport binding except HTTP server and client</li>
</ul></li>
</ul>

<h2 id="resources" name="resources">8. Resources</h2>

<dl>
<dt class="path"><a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=SOAP4R">[RAA:SOAP4R]</a></dt>
<dd>I will post a new release to RAA.
Check RAA to get a new stable (I hope) version.</dd>

<dt class="path"><a href="http://www.ruby-lang.org/~knu/cgi-bin/cvsweb.cgi/lib/soap4r/">CVS</a></dt>
<dd>There is the SOAP4R CVS repository in cvs.ruby-lang.org.
(Thanks to knu, the maintainer of cvs.ruby-lang.org.)
Check here to get most recent (but could be unstable) version.</dd>

<dt class="path"><a href="http://www.jin.gr.jp/~nahi/Ruby/SOAP4R/wiki.cgi">SOAP4R Wiki</a></dt>
<dd>There is a wiki for SOAP4R, running under
<a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=RWiki">[RAA:RWiki]</a>.
Feel free to add your comment there.
Any comments are welcomed. (as always)</dd>

<dt class="path"><a href="http://www.jin.gr.jp/~nahi/Ruby/SOAP4R/wiki.cgi?cmd=view;name=InteropResults">InteropResults</a></dt>
<dd>Test results of <a href="http://www.whitemesa.com/interop.htm">SOAPBuilders Interoperability Lab &quot;Round 2&quot;</a>.</dd>

</dl>

<h2 id="history" name="history">9. History</h2>

<dl>
<dt>1.4.4 - May 6, 2002</dt>
<dd>
This is a bug fix release.
Following users should update.
<ul>
<li>Users who use DateTime datatype.</li>
<li>Developers of SOAP client/server which works under multi-thread condition.</li>
<li>REXML users.</li>
</ul>
Fixed bugs.
<ul>
<li>XSDDataTime: Changed variable name usec to sec_frac.  It's not a micro sec so name usec is misleading.</li>
<li>XSDTime: Fixed bugs in usec part.</li>
<li>date.rb in standard library and date2 version 3 conflicts because date2.rb is a successor of date.rb and not designed for dual use.
(ex. using a module which requires date.rb like DBI and another module which requires date2.rb).
Added a workaround for this.</li>
<li>SOAP::Processor was not MT-safe.  Fixed.
Projected feature regards to MT are follows.
At least I hope so.  Tell me if you find these wrong.
<ul>
<li>Driver: safe</li>
<li>Proxy: safe</li>
<li>Server: safe</li>
<li>CGIStub: safe</li>
<li>StandaloneServer: safe</li>
<li>RPCRouter: safe</li>
<li>StreamHandler: safe</li>
<li>Processor: safe</li>
<li>SOAPParser: unsafe</li>
<li>SOAPGenerator: unsafe</li>
<li>EncodingStyleHandler: unsafe</li>
</ul>
</li>
<li>SOAP4R/1.4.3 supports REXML/2.1.3 but it did not detect REXML processor automatically.</li>
</ul>
</dd>

<dt>1.4.3 - April 11, 2002</dt>

<dd>
<dl>
<dt>Attention to 1.4.2 or earlier users;</dt>
<dd>
<ul>
<li>Stopped redistributing packages in RAA from this release.
Please get <a href="#dependencies">required</a> packages from
<a href="http://www.ruby-lang.org/en/raa.html">RAA</a>
and install it.</li>
<li>It still does NOT support WSDL!</li>
</ul>
</dd>

<dt>New features</dt>
<dd>
<ul>
<li>Added REXML parser support.</li>
<li>Added uninstaller.</li>
<li>Re: samples
<ul>
<li>Added 3 new samples, Calc, Exchange, and SampleStruct.</li>
<li>Use environment variable HTTP_PROXY or http_proxy for http proxy.</li>
<li>Removed unreachable services.</li>
<li>RAA: Separate iRAA.rb into RAA.rb and iRAA.rb.</li>
<li>Added description about <a href="#samples">samples</a> to RELEASE_en.html.</li>
</ul>
<li>Changed String encoding handling among
Ruby object &lt;-&gt; SOAP Data Model &lt;-&gt; XML instance.
<ul>
<li>Ruby object: $KCODE.</li>
<li>SOAP Data Model: utf-8 if uconv module is installed, $KCODE if not.</li>
<li>XML instance: Client side use utf-8 if uconv module is installed,
$KCODE if not.  Server side try to adjust the request encoding.</li>
<li>Use regexp instead of NKF.guess to check if the given String is EUC/SJIS or not.</li>
</ul>
</li>
<li>Added 'addServant' interface to server side.  See sample/Calc/server.rb.</li>
<li>Added 'addMethodAs' interface to both server side and client side.
See sample/Calc/server2.rb.</li>
</ul>
</dd>

<dt>Changes</dt>
<dd>
<ul>
<li>Removed Japanese document.
I was tired of maintaining 2 separated documents.
Though my English is poor as you see, numbers of readers of my English document
should be more than one of my Japanese document.
Would you please tell me bug of my English composition and of course in the code?</li>
<li>Use
<a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=Devel%3A%3ALogger">[RAA:Devel::Logger]</a>
instead of
<a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=Application">[RAA:Application]</a>.
</li>
<li>Avoided using exception in soap2obj and reduced warnings in runtime.</li>
<li>XSDDateTime: Use date2 version 3 instead of date3.rb.
Date2 version 3 will be included in standard distribution of Ruby/1.8.</li>
<li>XSDDateTime: Added XSDDateTimeToTime module to extract a Time object from XSDDateTime, XSDDate and XSDTime.</li>
</ul>
</dd>

<dt>Bug fixes</dt>
<dd>
<ul>
<li>Set 'charset=' to content-type when sending back a SOAPFault.
It was not set.</li>
<li>XSDDateTime: Parsedate was not used.  Removed.</li>
<li>Added constant Log as a canonical name of Devel::Logger for backward
compatibility of devel-logger.</li>
<li>Foo = Struct.new(:foo) and Foo = Struct.new("Foo", :foo) could not be
  unmarshalled collectly.  All members were unmarshalled as nil.  Fixed.</li>
<li>Rescue ArgumentError(Unrecognized signal) in standaloneServer.rb for mswin32 ruby.</li>
</ul>
</dd>
</dl>
</dd>

<dt>1.4.2 - December 28, 2001</dt>
<dd>
Many changes around Ruby language mapping for SOAP.
I replaced DRb's marshalling format with SOAP marshalling and it passed
about all unit test packed in DRb package.
Only test failed was regards to packet size.
You might be able to use SOAP::Marshal.(un|)marshal for serializing objects
instead of Marshal.(load|dump).

<ul>
<li>Illegal decoding of a position-less element after position-ed element.  Fixed.</li>
<li>Add Rubytype encoding/decoding support: Regexp, Class, Module and Symbol.</li>
<li>Added an option of MappingRegistry to raise an exception when unknown Struct.
The option is set 'false' by default so that same behaviour as before.</li>
</ul></dd>

<dt>1.4.1 - December 7, 2001</dt>
<dd>SOAP4R/1.4 contained many bugs (as usual...)
1.4.1 is a maintenance release.  Some bugs are fixed.
Thanks to Michael Neumann.

<ul>
<li>instance_eval in SOAPStruct#add for adding accessor illegaly overrode important methods for SOAP4R such as name, name= and so on.  Removed this instance_eval and rewrote other codes which did depend the code.  Thanks to MNeumann for reporting it and giving a suggestion to fix it.</li>
<li>Fixed charset handling.  Illegal charset was set when automatic XML processor detecting.</li>
<li>Removed unused code(self.decode) in element.rb.</li>
<li>Illegal constant access when SOAP format error.  Fixed.</li>
<li>LiteralEncodingNamespace moved to SOAP module.</li>
</ul></dd>


<dt>1.4 - December 5, 2001</dt>
<dd><ul>
<li>Datatypes:
<ul>
<li>XSDFloat: Bug in rounding double float to single float.  Fixed.</li>
<li>SOAPElement: Added for literal encoding.</li>
<li>Removed SOAP encoding functions from baseData.  EncondingStyleHandler should decide how to encode SOAP data model. (ie. ASP.NET seems to have its own encoding style.)</li>
<li>SOAPHeaderItem: Changed interface for easy use.</li>
</ul></li>

<li>SOAP Encoding:
<ul>
<li>Encoding by itself, not using NQXML's tree object model.</li>
<li>At last, supported multi-ref encoding!</li>
<li>marshal.rb: Marshalling with Envelope and Body.  To marshal multi-ref'd object, Body is needed. CAUTION: Not compatible between former implementation.</li>
<li>Add EncodingStyleHandlerLiteral and set it to default.</li>
<li>Renamed encoding.rb to encodingStyleHandler.rb.</li>
<li>Added ASP.NET encoding handler.  ASP.NET seems to use literal encoding (by default) but it is easier with this encodingStyleHandler to access the service which is built with ASP.NET.</li>
<li>Changed element name escape.
<ul>
<li>:: &lt;=&gt; \.\.</li>
<li>[^a-zA-Z0-9_-] &lt;=&gt; \.[0-F][0-F]
</ul>
Limitation: Using SOAP4R's RPC function, you cannot use the name which contains '.' for method name, class/struct name, and accessor name. In Ruby world, it should not be a problem I believe.</li>
</ul></li>

<li>RPC related functions:
<ul>
<li>Driver: Added 'invoke' method for messaging.</li>
<li>Driver: Content of SOAPFault detail element is set in the exception which is thrown from SOAP Node to client application.</li>
<li>Processor: Changed Processor.(un|)marshal interface.  An instance of NS for parsing/generating XML instance is prepared in parser/generator.</li>
<li>mappingRegistry.rb is devided from rpcUtils.rb.</li>
</ul></li>
</ul></dd>


<dt>1.3.8 - October 4, 2001</dt>
<dd>Feedback from
<a href="http://www.whitemesa.com/interop.htm">SOAPBuilders Interoperability Lab &quot;Round 2&quot;</a>
and Michael Neumann.  Thanks!

<ul>
<li>Datatypes:
<ul>
<li>XSDFloat: Creating float data from junk string such as "123.0junk" was
  converted to 0.0.  It should be avoided.  Fixed.</li>
<li>XSDFloat: Fixed double -&gt; single rounding code.</li>
</ul></li>

<li>RPC related functions:
<ul>
<li>Changed typename <=> NCName strategy.  '::' &lt;=&gt; '.'</li>
<li>Added mappingRegistry argument to interfaces for SOAP object creation.</li>
</ul></li>

<li>Others:
<ul>
<li>Set faultstring '(No faultstring)' to SOAP Fault when empty faultstring element.</li>
<li>server.rb: Added mappingRegistry interface.</li>
<li>marshal.rb: Create NCName from typename.</li>
</ul></li>
</ul></dd>


<dt>1.3.7 - August 24, 2001</dt>
<dd>Feedback from
<a href="http://www.whitemesa.com/interop.htm">SOAPBuilders Interoperability Lab &quot;Round 2&quot;</a>
and Michael Neumann.  Thanks!

<ul>
<li>Datatypes:
<ul>
<li>All datatypes try to keep nil correctly.</li>
<li>XSDInt/Integer/Long: to_i -&gt; Integer() to detect format error.</li>
<li>XSDDateTime, XSDDate, XSDTime: Add trailing 'Z' to indicate UTC.</li>
<li>SOAPStruct: Accept untyped struct.</li>
<li>Map(Hash): Let &lt;item&gt; untyped.</li>
<li>Apache allows only 'item' in Map type.</li>
</ul></li>

<li>Stream handler:
<ul>
<li>Removed MPOST support.</li>
<li>ECONNRESET was not caught.  Fixed.</li>
<li>Added timeout support.</li>
</ul></li>

<li>Others:
<ul>
<li>Changed using URI library: URb -&gt; URI; following its name change.</li>
<li>Added NQXML/1.1.0 support.  A XMLDecl now recognized as a XMLDecl, not a PI.</li>
</ul></li>
</ul></dd>

<dt>1.3.6 - July 27, 2001</dt>
<dd>Many feedbacks from Michael Neumann.  Thanks!

<ul>
<li>hexBinary type: Added.</li>
<li>nil type: Should not be xsd:nil but xsi:nil.</li>
<li>Added StandaloneServer implementation.  Thanks to Michael Neumann!</li>
<li>Illegal parsing of XMLDecl.  Fixed.</li>
<li>RPC's 'inout' param was not supported.  Fixed.  Thanks to Michael Neumann!</li>
<li>URb::Generic#path returns '' when abs_path is empty (such as http://foo).
Added checking code.</li>
<li>Use http-access2 instead of original HTTP implementation.  http-access2 supports HTTP/1.1's persistent connection.</li>
</ul></dd>

<dt>1.3.5 - July 14, 2001</dt>
<dd>Many feedbacks from Michael Neumann.
I much appreciate valuable comments to him.
Thanks!

<ul>
<li>Changed using URI library: uri -&gt; URb.</li>
<li>Types changed:
  <ul>
    <li>All: Triming data except XSDString before parsing it.</li>
    <li>String: Regexp for XML Char check did not work under $KCODE = 'UTF8' condition.  Fixed.</li>
    <li>Nil: 2001xsd:nil must not accept a value '1'.  1999xsd:null must not accept a value 'true' because these are not a boolean but only a flag for nil.  Fixed.</li>
  </ul>
</li>

<li>Supported XML parser:
  <ul>
    <li>Added automatic CES conversion support for NQXMLParser.
        (Depends on uconv module).
        Set $KCODE for regexps used in NQXML parser.</li>
    <li>Moved SOAPNQXML*Parser to nqxmlparser.rb.</li>
  </ul>
</li>

<li>RPC related functions changed:</li>
  <ul>
    <li>Added marshalling/unmarshalling Ruby's object using SOAP Encoding.</li>
    <li>Parallelize of signatures of 'addMethod': proxy.rb &lt;-&gt; rpcRouter.rb, driver.rb &lt;-&gt; cgistub.rb.</li>
    <li>Void return if 'retval' is not defined.</li>
    <li>Added SOAP's Long type to default mapping table.</li>
  </ul>
</li>
</ul></dd>

<dt>1.3.4.2 - July 11, 2001</dt>
<dd>SOAP4R/1.3.4 was once packed in July 10, 2001.
But, thanks to MNeumann and knu,
I found I had forgotten to pack 'redist' directory with it.
I added some fix from developing version and repack it as 1.3.4.2.
Sorry for frequently release...
<br/><br/>

Feedback from
<a href="http://www.xmethods.net/ilab/">`SOAPBuilders Interoperability Lab.'</a>
and Michael Neumann.  Thanks!

<ul>
<li>Added in 1.3.4.2:
  <ul>
    <li>Type Decimal: Silly bug fixed.  0.0001 was converted to 0.1</li>
    <li>CGIStub returns HTTP status 500 when returning SOAP Fault.
        Returned 200 because I don't like this spec., but SOAP/1.2 W3C WD
        9 July 2001 have adopted it.  Hmm...</li>
    <li>RPC client(driver.rb): Exception#set_backtrace was omitted when transmitting exception by SOAP Fault.</li>
  </ul>
</li>
<li>Types changed:
  <ul>
    <li>Array: Incomplete sparse array support.  Fixed.</li>
    <li>Date: Added.</li>
    <li>Time: Added.</li>
    <li>DateTime: Added precision of time support.</li>
    <li>String: Default data should not be nil but ''.</li>
    <li>Nil: Attribute value of xsi:nil might be '1' instead of 'true'.  Fixed.</li>
  </ul>
</li>

<li>Supported XML parser:
  <ul>
    <li>Added SOAPXMLParser and SOAPSAXDriver for XMLParser which uses expat.
        You can get the module from RAA: <a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=XMLParser">XMLParser module</a>.<br/>
        To use XMLParser -&gt; add &quot;require 'soap/xmlparser'&quot;.<br/>
        To use SAX driver of XMLParser -&gt; add &quot;require 'soap/saxdriver'&quot;.<br/>
        To use NQXMLParser -&gt; nothing to do.<br/>
        FYI:
        <ul>
          <li>XMLParser version is faster than others</li>
          <li>SAXDriver version is extremely slow</li>
          <li>NQXMLParser version is somewhat slower than XMLParser version</li>
          <li>XMLParser is a Ruby extension module; To use it, you must compile and install it.</li>
          <li>So far, automatic code conversion support is for XMLParser and SAXDriver.  See below.</li>
        </ul>
    </li>
    <li>Added automatic CES conversion support: UTF-8 &lt;-&gt; EUC, SJIS.
        Requires Uconv module.  Works with XMLParser module only now.</li>
    <li>Added XMLDecl for CES.</li>
  </ul>
</ul></dd>

<dt>1.3.3 - July 4, 2001</dt>
<dd>Feedback from
<a href="http://www.xmethods.net/ilab/">`SOAPBuilders Interoperability Lab.'</a>
and Michael Neumann.  Thanks!
<ul>
<li>Added SOAP4R Installer by Michael Neumann.  Thanks!</li>
<li>Types changed:
  <ul>
    <li>Boolean: Accepts 1 and 0 in addition to true and falue.</li>
    <li>Float: handles single-precision 32-bit floating point.
        Ruby's float is doule-precision.</li>
    <li>Double: Added.  Mapped to Ruby's Float.</li>
    <li>DateTime: Added TZ support.</li>
    <li>Long: Added.</li>
    <li>Int: Changed class hierarchy; derived from Long now.</li>
    <li>Array: Added 'position' and 'offset' support.</li>
    <li>Array: Added M-D Array support.</li>
    <li>Decimal: Added but it's incomplete now.</li>
  </ul>
</li>
<li>Illegal error message when a type not found in SOAP-ENC.</li>
<li>Tries to transmit \r safely.  To be checked...</li>
<li>Parse Fault items like 'faultcode' as same as Body ie. href/id.</li>
<li>rpcUtils.rb was completely re-written.
  <ul>
    <li>Added mappingRegistry interface.</li>
    <li>Changed soap2obj and obj2soap's interface.</li>
    <li>Bignum might be int or integer.  It's dependent on platform.
        Changed to check range  -2147483648~+2147483647 itself.</li>
    <li>ary2md: Added.  Converting Array ((of Array)...) to M-D Array.</li>
    <li>struct2obj: Illegal dependency on ordering of Struct#members.  Fixed.</li>
    <li>Ruby's Array should be converted to SOAP's Array of anyType.  Fixed.</li>
  </ul>
</li>
<li>Dump HTTP header even when an error was raised.</li>
</ul></dd>

<dt>1.3.2 - June 21, 2001</dt>
<dd>Feedback from
<a href="http://www.xmethods.net/ilab/">`SOAPBuilders Interoperability Lab.'</a>

<ul>
<li>&quot;nil='1'&quot; should be &quot;nil='true'&quot; in 2001 schema
whereas &quot;null='1'&quot; in 1999 schema.  Fixed.</li>
<li>SOAP Array was not typed with xsi:type.</li>
<li>Fixed serialization root handling algorithm.</li>
<li>Supported kind of SOAP-ENC:String style typed element.</li>
<li>Default namespace was not derived to child element.  Fixed.</li>
<li>Support default encodingStyle.</li>
<li>Added support for void type (SOAP::RPCUtils::SOAPVoid).</li>
</ul></dd>

<dt>1.3.1 - May 30, 2001</dt>
<dd>Feedback from
<a href="http://www.xmethods.net/ilab/">`SOAPBuilders Interoperability Lab.'</a>

<ul>
<li>Heading and trailing whtespaces in Base64 string could not be processed.  Fixed.</li>
<li>Illegal typeNamespace of SOAP's base64 type.  Fixed.</li>
<li>Added NaN, INF, -INF support of Float type.</li>
<li>Extracted xsd:1999 type support to XMLSchemaDatatypes1999.rb.  Use it with 'require &quot;soap/XMLSchemaDatatypes1999&quot;'.</li>
<li>Added 'root' attribute support.</li>
<li>Return status 500 when Fault.</li>
</ul></dd>

<dt>1.3.0 - May 20, 2001</dt>
<dd><ul>
<li>Adopted
<a href="http://www.ruby-lang.org/en/raa-list.rhtml?name=NQXML">NQXML module</a>
instead of XMLParser module extensively.
(You can implement your SOAP parser with XMLParser module.
See the last part of lib/soap/parser.rb)
<ul>
<li>Use NQXML's streamingParser or tokenizer instead of XMLParser's DOMParser for unmarshalling.</li>
<li>Use NQXML's document instead of XMLParser's DOM for marshalling.</li>
</ul></li>
<li>Passed major(?) part of inteoperability test in
<a href="http://www.xmethods.net/ilab/">`SOAPBuilders Interoperability Lab.'</a>
See test/interop/README.txt.</li>
<li>Changed module namespace.  SOAPFoo -> SOAP::Foo.</li>
<li>Added float datatype support.</li>
<li>Changed dateTime marshalling format.  No timezone was added to marshalled string  because SOAP4R does not support timezone now.</li>
</ul></dd>

<dt>1.2.0 - March 30, 2001</dt>
<dd>Checked interoperability with
<a href="http://xml.apache.org/soap/">Apache-SOAP</a>,
<a href="http://www.pocketsoap.com">pocketSOAP/0.91</a>,
<a href="http://www.geocities.com/paulclinger/soap.html">SOAP::Lite for Perl</a>,
and <a href="http://www.develop.com/soap/">SOAP/Perl/0.28</a>.
It seems to work good except SOAP/Perl/0.28.

<ul>
<li>Added href/id unmarshalling support.
(href/id marshalling has not been supported yet)</li>
<li>Added SOAP's base64 type support.</li>
<li>SOAPTimeInstant -&gt; SOAPDateTime.  Following XML Schema PR.</li>
<li>SOAPStruct can have multiple accessor which have same name.
Should I separate it from original SOAPStruct?</li>
<li>Unknown attribute in Header Item raised an exception.  Omitted.</li>
<li>Router can handle methods which belong to different namespace.</li>
<li>Added an option to allow unqualified SOAP element.</li>
<li>Added Apache's Map type support.  Ruby's Hash are mapped to it now.
(Ruby's Hash marshalled by 1.1 processor in the old way can be unmarshalled,
but 1.2 processor marshals it in the new way and 1.1 processor does not
unmarshals it into Hash.  Incompatibility between SOAP4R/1.2 and 1.1)</li>
<li>Unknown type 'unknown:SOAPStruct' was incorrectly unmarshalled into SOAPStruct.  Fixed.</li>
<li>Added utility methods map! and members to SOAPArray and SOAPStruct.</li>
<li>Added methods request, response, and fault to SOAPBody.</li>
</ul></dd>

<dt>1.1.0 - March 23, 2001</dt>
<dd>Made many changes.
Since it is tested only for my limited use, please be careful to use.
Any comments especially "cannot connect to XXX implementation" are welcomed.
Feel free sending mail to
<a href="mailto:nakahiro@sarion.co.jp" class="path">nakahiro@sarion.co.jp</a>.

<ul>
<li>Added RPC server support.</li>
<li>Divided RPC client/server implementation from core.</li>
<li>Added Date, Hash type support. (Unknown type is converted to Struct as usual)</li>
<li>Adopted Date in date3.rb by Funaba-san instead of Time as TimeInstant.</li>
<li>Many encoding/decoding bugs around SOAPArray and SOAPStruct were fixed.</li>
</ul></dd>

<dt>1.0.2 - November 11, 2000</dt>
<dd>Since the previous package dated, refreshes some points.
<ul>
<li>Ruby: ruby 1.6.x</li>
<li>uri.rb: 4.22</li>
<li>sample: xml-soap/2.0</li>
</ul></dd>

<dt>1.0.1 - July 27, 2000</dt>
<dd>Handles SOAP/1.1 arrays.
1.0.0 cannot handles SOAP/1.1 arrays...
Bare in mind there still be many
<a href="#restrictions">restrictions</a>
around SOAP arrays.</dd>

<dt>1.0.0 - July 17, 2000</dt>
<dd>It is the initial released version of SOAP4R. :-)</dd>
</dl>

<h2 id="author" name="author">10. Author</h2>

<dl>
<dt>Name</dt>
<dd>NAKAMURA, Hiroshi (aka NaHi or nakahiro)</dd>

<dt>E-mail</dt>
<dd><a href="mailto:nakahiro@sarion.co.jp" class="path">nakahiro@sarion.co.jp</a></dd>

<dt>URL</dt>
<dd><a href="http://www.jin.gr.jp/~nahi/" class="path">http://www.jin.gr.jp/~nahi/</a> (Japanese)</dd>
</dl>

<h2 id="copyright" name="copyright">11. Copyright</h2>

<p style="text-align: center;">
SOAP4R<br />
Copyright &copy; 2000, 2001, 2002 NAKAMURA, Hiroshi.
</p>

<p>
This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.
</p>

<p>
This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
See the GNU General Public License(the file named `COPYING') for more details.
</p>

<p>
You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
</p>

</div>

<hr />

<div class="footer">
<address>
<a href="http://www.jin.gr.jp/~nahi/Ruby/SOAP4R/">SOAP4R</a>.<br />
Copyright &copy; 2000, 2001, 2002
<a href="http://www.jin.gr.jp/~nahi/">NAKAMURA, Hiroshi</a>.
</address>
</div>
</body>
</html>
